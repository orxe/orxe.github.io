(this.webpackJsonporcs=this.webpackJsonporcs||[]).push([[0],{113:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return O}));var r=n(2),i=n.n(r),o=n(3),a=n(26),c=n(55),s=n(61),u=n(6),d=new a.d.PublicKey("6HtqQeY26a1M9qHiwj9CpBiNDURSuPFW3P3539c9phKB"),l=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var a,c,s,u,d,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:"recent",c=l.length>4&&void 0!==l[4]&&l[4],s=!1,u={slot:0,confirmations:0,err:null},d=0,e.next=7,new Promise(function(){var e=Object(o.a)(i.a.mark((function e(l,p){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),p({timeout:!0}))}),n);try{d=r.onSignature(t,(function(e,t){s=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),p(u)):(console.log("Resolved via websocket",e),l(u))}),a)}catch(f){s=!0,console.error("WS error in setup",t,f)}case 2:if(s||!c){e.next=8;break}return Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],s||(u?u.err?(console.log("REST error for",t,u),s=!0,p(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),s=!0,l(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,j(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:if(u=e.sent,!r._signatureSubscriptions[d]){e.next=11;break}return e.next=11,r.removeSignatureListener(d);case 11:return s=!0,console.log("Returning status",u),e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),p=function(t,n,r,i){var o=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:a.d.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1},{pubkey:a.d.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new a.d.TransactionInstruction({keys:o,programId:s.b,data:e.from([])})},f=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var o,c,u,l,p,f,b,m,h,g,O,j,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new a.b(r,t,{preflightCommitment:"recent"}),e.t0=JSON,e.next=4,fetch("idl/orcs.json").then((function(e){return e.text()}));case 4:return e.t1=e.sent,c=e.t0.parse.call(e.t0,e.t1),u=new a.a(c,s.a,o),l={id:n,connection:r,program:u},e.next=10,u.account.orcs.fetch(d);case 10:return p=e.sent,f=p.data.itemsAvailable.toNumber(),b=p.itemsRedeemed.toNumber(),m=p.config,h=p.data.uuid,g=f-b,O=p.data.goLiveDate.toNumber(),O=new Date(1e3*O),j=new Date(1e3*p.data.whitelistGoLiveDate.toNumber()),x=new Date(1e3*p.data.teamWhitelistGoLiveDate.toNumber()),e.abrupt("return",{orcs:l,itemsAvailable:f,itemsRedeemed:b,itemsRemaining:g,goLiveDate:O,whitelistGoLiveDate:j,teamWhitelistGoLiveDate:x,config:m,uuid:h});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.d.PublicKey.findProgramAddress([e.from("metadata"),s.c.toBuffer(),n.toBuffer(),e.from("edition")],s.c);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.d.PublicKey.findProgramAddress([e.from("metadata"),s.c.toBuffer(),n.toBuffer()],s.c);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(o.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.PublicKey.findProgramAddress([e.from("orcs"),r.config.toBuffer(),e.from(r.uuid),n.toBuffer()],s.a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.d.PublicKey.findProgramAddress([t.toBuffer(),c.b.toBuffer(),n.toBuffer()],s.b);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var O=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r,o){var u,d,l,f,O,j,x,v,S,w,P,y,A;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.orcs,d=a.d.Keypair.generate(),e.next=4,g(n,d.publicKey);case 4:return l=e.sent,f=u.connection,O=u.program,e.next=9,m(d.publicKey);case 9:return j=e.sent,e.next=12,b(d.publicKey);case 12:return x=e.sent,e.next=15,f.getMinimumBalanceForRentExemption(c.a.span);case 15:return v=e.sent,e.next=18,f.getAccountInfo(new a.d.PublicKey(u.id));case 18:if(!(S=e.sent)){e.next=41;break}if(w=O.coder.accounts.decode("Orcs",S.data),P=new a.d.PublicKey(w.config),y=[a.d.SystemProgram.createAccount({fromPubkey:n,newAccountPubkey:d.publicKey,space:c.a.span,lamports:v,programId:c.b}),c.c.createInitMintInstruction(c.b,d.publicKey,0,n,n),p(l,n,n,d.publicKey),c.c.createMintToInstruction(c.b,d.publicKey,l,n,[],1)],!o){e.next=35;break}return e.next=26,h(n,t);case 26:if(A=e.sent[0],o.data.nRedeemed.toNumber()<o.data.nRedeemable.toNumber()){e.next=29;break}throw new Error("Out of whitelist mints.");case 29:return console.log("About to run mint nft whitelisted"),e.next=32,O.rpc.mintNftWhitelisted({accounts:{config:P,orcs:u.id,whitelistedUser:A,payer:n,wallet:r,metadata:j,mint:d.publicKey,mintAuthority:n,updateAuthority:n,masterEdition:x,tokenMetadataProgram:s.c,tokenProgram:c.b,systemProgram:a.d.SystemProgram.programId,rent:a.d.SYSVAR_RENT_PUBKEY,clock:a.d.SYSVAR_CLOCK_PUBKEY},signers:[d],instructions:y});case 32:case 38:return e.abrupt("return",e.sent);case 35:return console.log("About to run normal mint nft"),e.next=38,O.rpc.mintNft({accounts:{config:P,orcs:u.id,payer:n,wallet:r,metadata:j,mint:d.publicKey,mintAuthority:n,updateAuthority:n,masterEdition:x,tokenMetadataProgram:s.c,tokenProgram:c.b,systemProgram:a.d.SystemProgram.programId,rent:a.d.SYSVAR_RENT_PUBKEY,clock:a.d.SYSVAR_CLOCK_PUBKEY},signers:[d],instructions:y});case 39:e.next=42;break;case 41:throw new Error("Could not get account info for orcs program id.");case 42:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),j=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(9).Buffer)},347:function(e,t,n){},348:function(e,t,n){},351:function(e,t){},353:function(e,t){},369:function(e,t){},370:function(e,t){},456:function(e,t){},458:function(e,t){},472:function(e,t){},476:function(e,t){},478:function(e,t){},488:function(e,t){},490:function(e,t){},517:function(e,t){},519:function(e,t){},524:function(e,t){},526:function(e,t){},533:function(e,t){},545:function(e,t){},548:function(e,t){},560:function(e,t){},561:function(e,t,n){"use strict";n.r(t);var r,i,o,a,c=n(1),s=n.n(c),u=n(28),d=n.n(u),l=(n(347),n(348),n(15)),p=n(13),f=n(2),b=n.n(f),m=n(3),h=n(7),g=n(8),O=n(51),j=n(16),x=n(17),v=n(131),S=n(132),w=n(305),P=n(588),y=n(593),A=n(597),R=n(596),D=n(6),T=n(50),k=n(169),_=n(113),K=n(25),C=Object(S.a)(k.a)(r||(r=Object(v.a)([""]))),L=S.a.span(i||(i=Object(v.a)([""]))),E=S.a.div(o||(o=Object(v.a)([""]))),N=Object(S.a)(P.a)(a||(a=Object(v.a)([""]))),M=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={isMinting:!1,itemsRemaining:r.props.orcsState.itemsRemaining,whitelistNRedeemed:r.props.whitelistedPDA?r.props.whitelistedPDA.data.nRedeemed.toNumber():-1,isActive:r.props.buttonStartDate<=new Date},console.log("Dates: ".concat(r.props.buttonStartDate.toLocaleString()," and ").concat((new Date).toLocaleString())),console.log("Date is active: ".concat(r.props.buttonStartDate<=new Date)),r.onMint=r.onMint.bind(Object(O.a)(r)),r.fullUpdate=r.fullUpdate.bind(Object(O.a)(r)),r}return Object(g.a)(n,[{key:"onMint",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,r,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.setState((function(e){return{isMinting:!0}})),!this.props.orcsState.orcs.program||!this.props.orcsState.config){e.next=14;break}return n=this.props.orcsState,console.log("About to mint one token!"),e.next=8,Object(_.e)(n,this.props.wallet.publicKey,this.props.treasury,this.props.whitelistedPDA);case 8:return r=e.sent,console.log("got mint tx id ".concat(r)),e.next=12,Object(_.b)(r,this.props.txTimeout,this.props.connection,"singleGossip",!1);case 12:(null===(i=e.sent)||void 0===i?void 0:i.err)?this.props.setAlertState({open:!0,message:"Mint failed! Please try again!",severity:"error"}):(this.props.setAlertState({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"}),t=!0);case 14:e.next=22;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),o=e.t0.msg||"Minting failed! Please try again!",e.t0.msg?311===e.t0.code?o="SOLD OUT!":312===e.t0.code&&(o="Minting period hasn't started yet."):e.t0.message.indexOf("0x138")||(e.t0.message.indexOf("0x137")?o="SOLD OUT!":e.t0.message.indexOf("0x135")&&(o="Insufficient funds to mint. Please fund your wallet.")),this.props.setAlertState({open:!0,message:o,severity:"error"});case 22:return e.prev=22,this.setState((function(e){return{isMinting:!1}})),t&&(this.setState((function(e){return{isMinting:!1,itemsRemaining:e.itemsRemaining-1}})),this.props.whitelistedPDA&&this.setState((function(e){return{whitelistNRedeemed:e.whitelistNRedeemed+1}}))),e.finish(22);case 26:case"end":return e.stop()}}),e,this,[[1,16,22,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"fullUpdate",value:function(){this.setState((function(e){return e}))}},{key:"render",value:function(){var e,t=this;0===this.state.itemsRemaining?e="SOLD OUT":this.props.whitelistedPDA&&this.state.whitelistNRedeemed>=this.props.whitelistedPDA.data.nRedeemable.toNumber()?e=this.props.whitelistedPDA.data.isTeamMember?"Out of team member mints":"Out of whitelist mints":this.state.isActive?this.state.isMinting?e=Object(K.jsx)(y.a,{}):(e="",this.props.whitelistedPDA&&(e+="[".concat(this.state.whitelistNRedeemed," / ").concat(this.props.whitelistedPDA.data.nRedeemable.toNumber(),"] ")),this.props.titlePrefix.length>0&&(e+="".concat(this.props.titlePrefix," ")),e+="MINT for ".concat(this.props.price," SOL (").concat(this.state.itemsRemaining," remaining)")):e=Object(K.jsx)(w.a,{date:this.props.buttonStartDate,onMount:function(e){return e.completed&&t.setState((function(e){return{isActive:!0}}))},onComplete:function(){return t.setState((function(e){return{isActive:!0}}))},renderer:B});var n=0===this.state.itemsRemaining;return this.props.whitelistedPDA&&(n=n||this.state.whitelistNRedeemed>=this.props.whitelistedPDA.data.nRedeemable),Object(K.jsx)(E,{children:Object(K.jsx)(N,{disabled:n||this.state.isMinting||!this.state.isActive,onClick:this.onMint,variant:"contained",children:e})})}}]),n}(s.a.Component),B=function(e){e.days;var t=e.hours,n=e.minutes,r=e.seconds;e.completed;return Object(K.jsxs)(L,{children:[t," hours, ",n," minutes, ",r," seconds"]})},I=function(e){var t,n,r,i,o=Object(c.useState)(),a=Object(p.a)(o,2),s=a[0],u=a[1],d=Object(c.useState)(),f=Object(p.a)(d,2),h=f[0],g=f[1],O=Object(T.c)(),j=Object(c.useState)(),x=Object(p.a)(j,2),v=x[0],S=x[1],w=Object(c.useState)(),P=Object(p.a)(w,2),k=P[0],L=P[1],E=Object(c.useState)(null),N=Object(p.a)(E,2),B=N[0],I=N[1],U=Object(c.useState)({open:!1,message:"",severity:void 0}),W=Object(p.a)(U,2),G=W[0],q=W[1];return Object(c.useEffect)((function(){Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O){t.next=5;break}return t.next=3,e.connection.getBalance(O.publicKey);case 3:n=t.sent,u(n/D.LAMPORTS_PER_SOL);case 5:case"end":return t.stop()}}),t)})))()}),[O,e.connection]),Object(c.useEffect)((function(){Object(m.a)(b.a.mark((function t(){var n,r,i,o,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(O){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(_.c)(O,e.orcsId,e.connection);case 4:return n=t.sent,L(n),t.next=8,Object(_.d)(O.publicKey,n);case 8:return r=t.sent[0],t.next=11,n.orcs.connection.getAccountInfo(r);case 11:return i=t.sent,t.next=14,n.orcs.connection.getAccountInfo(_.a);case 14:if(!(o=t.sent)){t.next=29;break}if(a=n.orcs.program.coder.accounts.decode("Orcs",o.data),g(a),!i){t.next=24;break}return t.next=21,n.orcs.program.account.whitelistPdaUser.fetch(r);case 21:c=t.sent,I(c),c.data.isTeamMember?q({open:!0,message:"Recognized as team member",severity:"success"}):q({open:!0,message:"Recognized as whitelisted user",severity:"success"});case 24:console.log("Got go live date ".concat(n.goLiveDate)),console.log("Got state program ".concat(n.orcs.program.programId.toBase58())),console.log("Got state id ".concat(n.orcs.id.toBase58())),console.log("Got state connection ".concat(n.orcs.connection)),S(n.orcs);case 29:case"end":return t.stop()}}),t)})))()}),[O,e.orcsId,e.connection]),O?k&&h&&h.data&&v&&s?(t=Object(K.jsxs)("ul",{children:[Object(K.jsxs)("li",{children:["Go live date: ",k.goLiveDate.toLocaleString()]}),Object(K.jsxs)("li",{children:["Whitelisted go live date: ",k.whitelistGoLiveDate.toLocaleString()]}),Object(K.jsxs)("li",{children:["Team go live date: ",k.teamWhitelistGoLiveDate.toLocaleString()]})]}),console.log(h),n=Object(K.jsx)(M,{titlePrefix:"",price:h.data.price/D.LAMPORTS_PER_SOL,balance:s,buttonStartDate:k.goLiveDate,orcsId:e.orcsId,connection:e.connection,treasury:e.treasury,txTimeout:e.txTimeout,setAlertState:q,wallet:O,decodedOrcs:h,orcsState:k,whitelistedPDA:null}),B&&(B.data.isTeamMember?i=Object(K.jsx)(M,{titlePrefix:"Team member",price:0,balance:s,buttonStartDate:k.teamWhitelistGoLiveDate,orcsId:e.orcsId,connection:e.connection,treasury:e.treasury,txTimeout:e.txTimeout,setAlertState:q,wallet:O,decodedOrcs:h,orcsState:k,whitelistedPDA:B}):r=Object(K.jsx)(M,{titlePrefix:"Whitelisted",price:h.data.whitelistedPrice/D.LAMPORTS_PER_SOL,balance:s,buttonStartDate:k.whitelistGoLiveDate,orcsId:e.orcsId,connection:e.connection,treasury:e.treasury,txTimeout:e.txTimeout,setAlertState:q,wallet:O,decodedOrcs:h,orcsState:k,whitelistedPDA:B}))):t=Object(K.jsx)(y.a,{color:"secondary"}):t=Object(K.jsx)(C,{children:"Connect Wallet"}),Object(K.jsxs)("main",{children:[t,n,Object(K.jsx)("br",{}),r,Object(K.jsx)("br",{}),i,Object(K.jsx)(A.a,{open:G.open,autoHideDuration:12e3,onClose:function(){return q(Object(l.a)(Object(l.a)({},G),{},{open:!1}))},children:Object(K.jsx)(R.a,{onClose:function(){return q(Object(l.a)(Object(l.a)({},G),{},{open:!1}))},severity:G.severity,children:G.message})})]})},U=n(26),W=n(114),G=n(334),q=n(594),Y=new U.d.PublicKey("4DiSANwTSUXQqc7z7K2XXcmQvKNLfapoNjU4DBpCr3gx"),H=new U.d.PublicKey("6HtqQeY26a1M9qHiwj9CpBiNDURSuPFW3P3539c9phKB"),F="devnet",Q=new U.d.Connection("https://api.devnet.solana.com"),V=(parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ORCS_DATA_ACCOUNT_ID:"6HtqQeY26a1M9qHiwj9CpBiNDURSuPFW3P3539c9phKB",REACT_APP_ORCS_PROGRAM_ID:"29UUqjwkTRqVMQ51GNjn9soSouXiC7vPvUMZJKaZ286f",REACT_APP_TREASURY_ADDRESS:"4DiSANwTSUXQqc7z7K2XXcmQvKNLfapoNjU4DBpCr3gx",REACT_APP_SOLANA_NETWORK:"devnet",REACT_APP_SOLANA_RPC_HOST:"https://api.devnet.solana.com"}).REACT_APP_ORCS_START_DATE,10),Object(G.a)({palette:{type:"dark"},overrides:{MuiButtonBase:{root:{justifyContent:"flex-start"}},MuiButton:{root:{textTransform:void 0,padding:"12px 16px"},startIcon:{marginRight:8},endIcon:{marginLeft:8}}}})),X=function(){var e=Object(c.useMemo)((function(){return Object(D.clusterApiUrl)(F)}),[]),t=Object(c.useMemo)((function(){return[Object(W.a)(),Object(W.b)(),Object(W.c)(),Object(W.e)({network:F}),Object(W.d)({network:F})]}),[]);return Object(K.jsx)(q.a,{theme:V,children:Object(K.jsx)(T.a,{endpoint:e,children:Object(K.jsx)(T.b,{wallets:t,autoConnect:!0,children:Object(K.jsx)(k.b,{children:Object(K.jsx)(I,{orcsId:H,connection:Q,treasury:Y,txTimeout:3e6})})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,598)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))};d.a.render(Object(K.jsx)(s.a.StrictMode,{children:Object(K.jsx)(X,{})}),document.getElementById("root")),J()},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n(26),i=new r.d.PublicKey("29UUqjwkTRqVMQ51GNjn9soSouXiC7vPvUMZJKaZ286f"),o=new r.d.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),a=new r.d.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s")}},[[561,1,2]]]);
//# sourceMappingURL=main.b26bfa7f.chunk.js.map